# ğŸ¯ Manager Dashboard - MÃ©tricas Finales Recomendadas

**DecisiÃ³n**: Perspectiva Software Engineering Full Stack + SaaS Premium
**Fecha**: 2025-11-25

---

## ğŸ“Š LAYOUT FINAL DEL DASHBOARD

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Manager Dashboard - Vista Global de Proyectos                     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  FILA 1: MÃ‰TRICAS CRÃTICAS (4 Cards)                                â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ ğŸš¨          â”‚ ğŸ¤–          â”‚ ğŸ›          â”‚ ğŸ“ˆ                       â”‚
â”‚ PROJECTS    â”‚ AI-GENERATEDâ”‚ CRITICAL    â”‚ COVERAGE                 â”‚
â”‚ AT RISK     â”‚ TESTS       â”‚ BUGS OPEN   â”‚ TREND                    â”‚
â”‚             â”‚             â”‚             â”‚                          â”‚
â”‚     3       â”‚     45      â”‚      7      â”‚  78% â†—ï¸ +5%              â”‚
â”‚  Proyectos  â”‚ This Week   â”‚  Bloqueantesâ”‚ vs 7 days ago            â”‚
â”‚             â”‚ 20h saved   â”‚ Avg: 3.2d   â”‚                          â”‚
â”‚             â”‚             â”‚             â”‚                          â”‚
â”‚ Click â†’     â”‚ Click â†’     â”‚ Click â†’     â”‚ Click â†’                  â”‚
â”‚ Filter Risk â”‚ AI Tests    â”‚ Bug List    â”‚ Trend Chart              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  FILA 2: QUICK ACTIONS (4 Botones)                                  â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ ğŸ“¥          â”‚ ğŸ”          â”‚ âš¡          â”‚ ğŸ“…                       â”‚
â”‚ DOWNLOAD    â”‚ COMPARE     â”‚ RUN AI      â”‚ SCHEDULE                 â”‚
â”‚ REPORT      â”‚ PROJECTS    â”‚ GENERATION  â”‚ EXECUTION                â”‚
â”‚             â”‚             â”‚             â”‚                          â”‚
â”‚ PDF/DOCX    â”‚ Side-by-sideâ”‚ Bulk tests  â”‚ Plan runs                â”‚
â”‚ All Projectsâ”‚ Metrics     â”‚ for uncoveredâ”‚Automated                â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  FILA 3: FILTERS                                                     â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  ğŸ” Search  [            ]   â˜‘ï¸ Active Only   â˜‘ï¸ At Risk   ğŸ§¹ Clear  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  PROJECTS TABLE                                                      â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ Name   â”‚Storiesâ”‚Testsâ”‚Coverage â”‚ Bugs â”‚ Pass â”‚ Health â”‚ Actions     â”‚
â”‚        â”‚       â”‚     â”‚         â”‚      â”‚ Rate â”‚        â”‚             â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ Proj A â”‚  12  â”‚  48  â”‚  85% â†—ï¸ â”‚   2  â”‚ 92%  â”‚ 85 ğŸŸ¢  â”‚ View | Rpt  â”‚
â”‚ Proj B â”‚   8  â”‚  20  â”‚  65% â†˜ï¸ â”‚   5  â”‚ 78%  â”‚ 45 ğŸ”´  â”‚ View | Rpt  â”‚
â”‚ Proj C â”‚  15  â”‚  60  â”‚  90% â†’  â”‚   0  â”‚ 95%  â”‚ 92 ğŸŸ¢  â”‚ View | Rpt  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸ“‹ DETALLE DE MÃ‰TRICAS

### ğŸš¨ CARD 1: Projects at Risk

**QuÃ© Muestra**:
```
     ğŸš¨
  PROJECTS
   AT RISK

      3
  Proyectos
```

**DefiniciÃ³n de "At Risk"**:
Un proyecto estÃ¡ en riesgo si cumple **cualquiera** de estas condiciones:
1. Coverage < 70% **Y** tiene bugs crÃ­ticos abiertos (â‰¥1)
2. Cero test executions en Ãºltimos 7 dÃ­as (abandonado)
3. Health Score < 50 (umbral crÃ­tico)

**CÃ¡lculo (Backend)**:
```python
def calculate_at_risk_projects(organization_id: str) -> int:
    projects = get_all_projects(organization_id)

    at_risk = []
    for project in projects:
        stats = get_project_stats(project.id)

        # CondiciÃ³n 1: Baja cobertura + bugs crÃ­ticos
        if stats['test_coverage'] < 70 and stats['critical_bugs'] > 0:
            at_risk.append(project)
            continue

        # CondiciÃ³n 2: Sin actividad reciente
        last_execution = get_last_execution_date(project.id)
        if not last_execution or (date.today() - last_execution).days > 7:
            at_risk.append(project)
            continue

        # CondiciÃ³n 3: Health Score crÃ­tico
        if stats['health_score'] < 50:
            at_risk.append(project)

    return len(at_risk)
```

**NavegaciÃ³n al Click**:
```
URL: /manager/projects?filter=at_risk
Efecto: Tabla de proyectos se filtra automÃ¡ticamente mostrando solo los 3 en riesgo
```

**Color Coding**:
- ğŸ”´ Rojo si count > 0
- ğŸŸ¢ Verde si count = 0

**Por QuÃ© Es Valiosa**:
- **Predictiva**: Anticipa problemas antes del deadline
- **Accionable**: Manager sabe exactamente dÃ³nde enfocar recursos HOY
- **EstratÃ©gica**: Un CTO/VP Engineering paga por ver esto en su reuniÃ³n matutina

---

### ğŸ¤– CARD 2: AI-Generated Tests (This Week)

**QuÃ© Muestra**:
```
     ğŸ¤–
AI-GENERATED
    TESTS

     45
 This Week
  20h saved
```

**CÃ¡lculo (Backend)**:
```python
def calculate_ai_tests_this_week(organization_id: str) -> dict:
    today = date.today()
    week_ago = today - timedelta(days=7)

    ai_tests = db.query(TestCaseDB).filter(
        TestCaseDB.organization_id == organization_id,
        TestCaseDB.created_by_ai == True,
        TestCaseDB.created_at >= week_ago
    ).count()

    # EstimaciÃ³n: 1 test case manual toma ~27 minutos
    hours_saved = ai_tests * 0.45

    return {
        'ai_tests_count': ai_tests,
        'hours_saved': round(hours_saved, 1)
    }
```

**Datos Necesarios** (MigraciÃ³n):
```python
# AÃ±adir campo a TestCaseDB:
class TestCaseDB(Base):
    # ... existing fields ...
    created_by_ai = Column(Boolean, default=False)
    ai_model_version = Column(String, nullable=True)  # "gemini-2.5-flash"
```

**MigraciÃ³n**:
```sql
ALTER TABLE test_cases
ADD COLUMN created_by_ai BOOLEAN DEFAULT FALSE;

ALTER TABLE test_cases
ADD COLUMN ai_model_version VARCHAR(50);
```

**Actualizar Endpoint** `/generate-test-cases`:
```python
# En generate_test_cases() al guardar:
test_case = TestCaseDB(
    # ... existing fields ...
    created_by_ai=True,
    ai_model_version="gemini-2.5-flash"
)
```

**NavegaciÃ³n al Click**:
```
URL: /test-cases?created_by_ai=true&date_from={7_days_ago}
Efecto: Muestra lista de 45 tests generados por AI esta semana
```

**Por QuÃ© Es Valiosa**:
- **ROI Tangible**: "20h saved" = $1,000 saved (a $50/h)
- **Justifica Precio**: Un SaaS de $799/mes se paga solo con esto
- **Diferenciador**: TestRail/Jira NO tienen esto
- **Talking Point Ventas**: "Nuestros clientes ahorran 80h/mes con AI"

---

### ğŸ› CARD 3: Critical Bugs Open

**QuÃ© Muestra**:
```
     ğŸ›
  CRITICAL
 BUGS OPEN

      7
 Bloqueantes
 Avg: 3.2 days
```

**CÃ¡lculo (Backend)**:
```python
def calculate_critical_bugs_stats(organization_id: str) -> dict:
    # Bugs crÃ­ticos abiertos
    critical_open = db.query(BugDB).filter(
        BugDB.organization_id == organization_id,
        BugDB.severity.in_(["CRITICAL", "HIGH"]),
        BugDB.status.in_(["OPEN", "IN_PROGRESS"])
    ).count()

    # Promedio de resoluciÃ³n (Ãºltimos 30 dÃ­as)
    thirty_days_ago = date.today() - timedelta(days=30)

    resolved_bugs = db.query(BugDB).filter(
        BugDB.organization_id == organization_id,
        BugDB.severity.in_(["CRITICAL", "HIGH"]),
        BugDB.status == "CLOSED",
        BugDB.resolved_at >= thirty_days_ago,
        BugDB.resolved_at.isnot(None)
    ).all()

    if resolved_bugs:
        resolution_times = [
            (bug.resolved_at - bug.created_at).days
            for bug in resolved_bugs
        ]
        avg_resolution = sum(resolution_times) / len(resolution_times)
    else:
        avg_resolution = 0

    return {
        'critical_open': critical_open,
        'avg_resolution_days': round(avg_resolution, 1)
    }
```

**Datos Necesarios** (MigraciÃ³n):
```python
# AÃ±adir campo a BugDB:
class BugDB(Base):
    # ... existing fields ...
    resolved_at = Column(DateTime, nullable=True)
```

**MigraciÃ³n**:
```sql
ALTER TABLE bugs
ADD COLUMN resolved_at TIMESTAMP;

-- Rellenar histÃ³rico (bugs ya cerrados):
UPDATE bugs
SET resolved_at = updated_at
WHERE status = 'CLOSED' AND resolved_at IS NULL;
```

**NavegaciÃ³n al Click**:
```
URL: /bugs?severity=critical,high&status=open,in_progress
Efecto: Lista de 7 bugs crÃ­ticos que bloquean release
```

**Color Coding**:
- ğŸ”´ Rojo si count > 5
- ğŸŸ¡ Amarillo si count 1-5
- ğŸŸ¢ Verde si count = 0

**Por QuÃ© Es Valiosa**:
- **NÃºmero Concreto**: "7 bugs" es mÃ¡s accionable que "Riesgo: Medio"
- **Contexto de Eficiencia**: "Avg 3.2 days" indica si el equipo es rÃ¡pido resolviendo
- **PredicciÃ³n de Release**: Si hay 7 bugs y tardan 3 dÃ­as promedio â†’ ~21 dÃ­as para cerrar todos
- **Urgencia Visual**: NÃºmero rojo grande exige atenciÃ³n inmediata

---

### ğŸ“ˆ CARD 4: Coverage Trend

**QuÃ© Muestra**:
```
     ğŸ“ˆ
  COVERAGE
   TREND

 78% â†—ï¸ +5%
vs 7 days ago
```

**CÃ¡lculo (Backend)**:
```python
def calculate_coverage_trend(organization_id: str) -> dict:
    # Coverage actual (todos los proyectos)
    projects = get_all_projects(organization_id)

    total_stories = sum(p.total_user_stories for p in projects)
    stories_with_tests = sum(p.stories_with_tests for p in projects)

    coverage_today = (stories_with_tests / total_stories * 100) if total_stories > 0 else 0

    # Coverage de hace 7 dÃ­as (desde histÃ³rico)
    seven_days_ago = date.today() - timedelta(days=7)

    historical = db.query(CoverageHistoryDB).filter(
        CoverageHistoryDB.organization_id == organization_id,
        CoverageHistoryDB.snapshot_date == seven_days_ago
    ).first()

    coverage_7_days_ago = historical.coverage_pct if historical else coverage_today

    trend = coverage_today - coverage_7_days_ago

    return {
        'coverage_pct': round(coverage_today, 1),
        'trend_pct': round(trend, 1),
        'trend_direction': 'up' if trend > 0 else 'down' if trend < 0 else 'stable'
    }
```

**Nueva Tabla Requerida**:
```python
class CoverageHistoryDB(Base):
    __tablename__ = "coverage_history"

    id = Column(Integer, primary_key=True, autoincrement=True)
    organization_id = Column(String, nullable=False)
    snapshot_date = Column(Date, nullable=False)
    coverage_pct = Column(Float, nullable=False)
    total_stories = Column(Integer, nullable=False)
    stories_with_tests = Column(Integer, nullable=False)
    created_at = Column(DateTime, default=datetime.utcnow)

    __table_args__ = (
        UniqueConstraint('organization_id', 'snapshot_date', name='uq_org_date'),
    )
```

**Job Diario** (Cron/Scheduler):
```python
# backend/jobs/daily_snapshot.py
from apscheduler.schedulers.background import BackgroundScheduler

def take_daily_snapshot():
    """Corre todos los dÃ­as a las 23:59"""
    organizations = db.query(UserDB.organization_id).distinct().all()

    for org_id in organizations:
        projects = get_all_projects(org_id)

        total_stories = sum(p.total_user_stories for p in projects)
        stories_with_tests = sum(p.stories_with_tests for p in projects)
        coverage = (stories_with_tests / total_stories * 100) if total_stories > 0 else 0

        snapshot = CoverageHistoryDB(
            organization_id=org_id,
            snapshot_date=date.today(),
            coverage_pct=coverage,
            total_stories=total_stories,
            stories_with_tests=stories_with_tests
        )

        db.add(snapshot)

    db.commit()

# Configurar scheduler en main.py:
scheduler = BackgroundScheduler()
scheduler.add_job(take_daily_snapshot, 'cron', hour=23, minute=59)
scheduler.start()
```

**NavegaciÃ³n al Click**:
```
AcciÃ³n: Abrir modal con grÃ¡fica line chart
Datos: Ãšltimos 30 dÃ­as de coverage (eje X: fechas, eje Y: %)
```

**Color Coding**:
- â†—ï¸ Verde si trend > 0
- â†˜ï¸ Rojo si trend < 0
- â†’ Gris si trend = 0

**Por QuÃ© Es Valiosa**:
- **Predictiva**: Tendencia indica si llegaremos a 90% coverage para el release
- **Alerta Temprana**: "â†˜ï¸ -3%" significa degradaciÃ³n â†’ investigar por quÃ©
- **Motivacional**: "â†—ï¸ +5%" muestra progreso del equipo â†’ boost de moral
- **EstratÃ©gica**: Manager puede proyectar: "A este ritmo, 90% coverage en 2 semanas"

---

## ğŸš€ FILA 2: QUICK ACTIONS

En lugar de mÃ¡s mÃ©tricas (information overload), la fila 2 ofrece **acciones frecuentes**.

### ğŸ“¥ ACTION 1: Download Consolidated Report

**BotÃ³n**:
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  ğŸ“¥ DOWNLOAD     â”‚
â”‚     REPORT       â”‚
â”‚                  â”‚
â”‚  PDF/DOCX        â”‚
â”‚  All Projects    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**AcciÃ³n al Click**:
```javascript
onClick={() => {
  const format = 'pdf';  // o permitir selector
  downloadConsolidatedReport(format);
}}
```

**Backend Endpoint** (ya existe):
```
GET /api/v1/reports/consolidated?format=pdf
â†’ Returns FileResponse with PDF
```

**Contenido del Report**:
- Resumen ejecutivo (4 mÃ©tricas principales)
- Tabla de proyectos con health scores
- GrÃ¡ficas de tendencias
- Top 5 bugs crÃ­ticos

---

### ğŸ” ACTION 2: Compare Projects

**BotÃ³n**:
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  ğŸ” COMPARE      â”‚
â”‚     PROJECTS     â”‚
â”‚                  â”‚
â”‚  Side-by-side    â”‚
â”‚    Metrics       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**AcciÃ³n al Click**:
```javascript
onClick={() => {
  setShowCompareModal(true);
}}
```

**Modal Content**:
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Compare Projects                      [X]  â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  Select 2-4 projects to compare:            â”‚
â”‚  â˜‘ï¸ Project A   â˜‘ï¸ Project B   â˜ Project C  â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  Metric       â”‚ Proj A â”‚ Proj B â”‚ Proj C   â”‚
â”‚ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ â”‚
â”‚  Coverage     â”‚  85%   â”‚  65%   â”‚  90%     â”‚
â”‚  Bugs         â”‚   2    â”‚   5    â”‚   0      â”‚
â”‚  Pass Rate    â”‚  92%   â”‚  78%   â”‚  95%     â”‚
â”‚  Health       â”‚  85    â”‚  45    â”‚  92      â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚           [Export Comparison]               â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

### âš¡ ACTION 3: Run AI Generation

**BotÃ³n**:
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  âš¡ RUN AI       â”‚
â”‚    GENERATION    â”‚
â”‚                  â”‚
â”‚  Bulk tests      â”‚
â”‚ for uncovered    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**AcciÃ³n al Click**:
```javascript
onClick={() => {
  // Encuentra stories sin tests
  const uncoveredStories = getStoriesWithoutTests();

  // Modal con selector
  setShowAIGenerationModal(true);
  setStoriesForAI(uncoveredStories);
}}
```

**Modal Content**:
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  AI Bulk Generation                    [X]  â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  Found 12 User Stories without test cases   â”‚
â”‚                                             â”‚
â”‚  Select stories to generate tests:          â”‚
â”‚  â˜‘ï¸ US-001: User Login (HIGH)               â”‚
â”‚  â˜‘ï¸ US-005: Password Reset (MEDIUM)         â”‚
â”‚  â˜ US-012: Profile Edit (LOW)              â”‚
â”‚                                             â”‚
â”‚  Tests per story: [3]                       â”‚
â”‚  Scenarios per test: [2]                    â”‚
â”‚                                             â”‚
â”‚  Estimated: 12 stories Ã— 3 tests = 36 tests â”‚
â”‚  Time saved: ~16 hours                      â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚      [Cancel]    [Generate All âš¡]           â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**Valor**:
- **Proactivo**: Manager no necesita ir proyecto por proyecto
- **Eficiencia**: Genera tests en batch (1 click)
- **Visible**: Muestra ROI inmediato ("16h saved")

---

### ğŸ“… ACTION 4: Schedule Execution

**BotÃ³n**:
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  ğŸ“… SCHEDULE     â”‚
â”‚    EXECUTION     â”‚
â”‚                  â”‚
â”‚   Plan runs      â”‚
â”‚   Automated      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**AcciÃ³n al Click**:
```javascript
onClick(() => {
  setShowScheduleModal(true);
}}
```

**Modal Content** (Future Feature):
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Schedule Test Execution               [X]  â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  Project: [Select Project â–¼]                â”‚
â”‚  Test Suite: [All Tests â–¼]                  â”‚
â”‚                                             â”‚
â”‚  Frequency:                                 â”‚
â”‚  â—‹ Daily   â—‹ Weekly   â— On-Demand          â”‚
â”‚                                             â”‚
â”‚  Time: [09:00 AM]                           â”‚
â”‚  Environment: [Staging â–¼]                   â”‚
â”‚                                             â”‚
â”‚  Notification:                              â”‚
â”‚  â˜‘ï¸ Email results to team                   â”‚
â”‚  â˜‘ï¸ Slack alert if failures                 â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚          [Cancel]    [Schedule ğŸ“…]           â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**Nota**: Esta feature requiere un sistema de queue/scheduler (Celery, RabbitMQ).
**Roadmap**: Q2 2026 (despuÃ©s de tener ejecuciÃ³n automÃ¡tica de tests)

---

## ğŸ¨ DISEÃ‘O VISUAL (TailwindCSS)

### Card Component:
```tsx
// components/MetricCard.tsx
interface MetricCardProps {
  icon: React.ReactNode;
  title: string;
  value: string | number;
  subtitle?: string;
  trend?: {
    direction: 'up' | 'down' | 'stable';
    value: string;
  };
  color: 'red' | 'green' | 'blue' | 'purple';
  onClick?: () => void;
}

export const MetricCard: React.FC<MetricCardProps> = ({
  icon,
  title,
  value,
  subtitle,
  trend,
  color,
  onClick
}) => {
  const colorClasses = {
    red: 'bg-red-50 border-red-200 text-red-600',
    green: 'bg-green-50 border-green-200 text-green-600',
    blue: 'bg-blue-50 border-blue-200 text-blue-600',
    purple: 'bg-purple-50 border-purple-200 text-purple-600',
  };

  const trendIcons = {
    up: 'â†—ï¸',
    down: 'â†˜ï¸',
    stable: 'â†’'
  };

  return (
    <div
      className={`
        card cursor-pointer hover:shadow-lg transition-all
        ${onClick ? 'hover:scale-105' : ''}
      `}
      onClick={onClick}
    >
      <div className="flex items-center justify-between mb-4">
        <div className={`p-3 rounded-full ${colorClasses[color]}`}>
          {icon}
        </div>
        {trend && (
          <span className="text-sm font-medium">
            {trendIcons[trend.direction]} {trend.value}
          </span>
        )}
      </div>

      <h3 className="text-sm font-medium text-gray-600 uppercase">
        {title}
      </h3>

      <p className="text-4xl font-bold text-gray-900 mt-2">
        {value}
      </p>

      {subtitle && (
        <p className="text-sm text-gray-500 mt-1">
          {subtitle}
        </p>
      )}
    </div>
  );
};
```

### Uso:
```tsx
<MetricCard
  icon={<AlertTriangle size={24} />}
  title="Projects at Risk"
  value={3}
  subtitle="Proyectos"
  color="red"
  onClick={() => navigate('/projects?filter=at_risk')}
/>

<MetricCard
  icon={<Zap size={24} />}
  title="AI-Generated Tests"
  value={45}
  subtitle="This Week â€¢ 20h saved"
  color="purple"
  onClick={() => navigate('/test-cases?ai=true')}
/>

<MetricCard
  icon={<Bug size={24} />}
  title="Critical Bugs Open"
  value={7}
  subtitle="Bloqueantes â€¢ Avg: 3.2 days"
  color="red"
  onClick={() => navigate('/bugs?severity=critical,high')}
/>

<MetricCard
  icon={<TrendingUp size={24} />}
  title="Coverage Trend"
  value="78%"
  trend={{ direction: 'up', value: '+5%' }}
  subtitle="vs 7 days ago"
  color="green"
  onClick={() => setShowTrendModal(true)}
/>
```

---

## ğŸ“¦ RESUMEN DE CAMBIOS REQUERIDOS

### ğŸ—„ï¸ Migraciones de Base de Datos:

```sql
-- 1. AÃ±adir flag de AI a test cases
ALTER TABLE test_cases
ADD COLUMN created_by_ai BOOLEAN DEFAULT FALSE,
ADD COLUMN ai_model_version VARCHAR(50);

-- 2. AÃ±adir fecha de resoluciÃ³n a bugs
ALTER TABLE bugs
ADD COLUMN resolved_at TIMESTAMP;

-- Rellenar histÃ³rico:
UPDATE bugs
SET resolved_at = updated_at
WHERE status = 'CLOSED' AND resolved_at IS NULL;

-- 3. Crear tabla de histÃ³rico de coverage
CREATE TABLE coverage_history (
    id SERIAL PRIMARY KEY,
    organization_id VARCHAR(100) NOT NULL,
    snapshot_date DATE NOT NULL,
    coverage_pct FLOAT NOT NULL,
    total_stories INTEGER NOT NULL,
    stories_with_tests INTEGER NOT NULL,
    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
    CONSTRAINT uq_org_date UNIQUE (organization_id, snapshot_date)
);

CREATE INDEX idx_coverage_org_date ON coverage_history(organization_id, snapshot_date);
```

### ğŸ”§ Backend Changes:

**Archivos a Crear**:
- `backend/jobs/daily_snapshot.py` - Job diario para snapshots
- `backend/database/models.py` - AÃ±adir CoverageHistoryDB
- `backend/services/metrics_service.py` - Servicio de mÃ©tricas del manager

**Archivos a Modificar**:
- `backend/api/endpoints/test_cases.py` - Marcar tests generados por AI
- `backend/database/models.py` - AÃ±adir campos `created_by_ai`, `resolved_at`
- `backend/main.py` - Iniciar scheduler para job diario

### ğŸ¨ Frontend Changes:

**Archivos a Crear**:
- `frontend/src/shared/ui/MetricCard.tsx` - Componente de card
- `frontend/src/features/compare-projects/` - Feature de comparaciÃ³n
- `frontend/src/features/ai-bulk-generation/` - Feature de generaciÃ³n masiva

**Archivos a Modificar**:
- `frontend/src/pages/ManagerDashboardPage/` - Reemplazar cards actuales
- `frontend/src/pages/ManagerDashboardPage/model/useManagerDashboard.ts` - AÃ±adir nuevas mÃ©tricas

---

## ğŸ“Š PRIORIZACIÃ“N (MVP â†’ Full)

### ğŸš€ Sprint 1 (MVP - Semana 1-2): MÃ©tricas EstÃ¡ticas
**Goal**: Mostrar mÃ©tricas sin histÃ³rico

âœ… **Implementar**:
- Projects at Risk (con datos actuales)
- Critical Bugs Open (sin avg resolution time)
- AI-Generated Tests (aÃ±adir flag `created_by_ai`)
- Coverage actual (sin trend)

âŒ **Excluir**:
- Tendencias temporales
- Avg resolution time
- Quick Actions

**Valor**: Manager ve mÃ©tricas bÃ¡sicas pero Ãºtiles

---

### ğŸ”„ Sprint 2 (Tendencias - Semana 3-4): AÃ±adir HistÃ³rico
**Goal**: AÃ±adir dimensiÃ³n temporal

âœ… **Implementar**:
- Tabla `coverage_history`
- Job diario para snapshots
- Coverage Trend con flechas
- Avg Bug Resolution Time (requiere `resolved_at`)

**Valor**: Manager ve si estÃ¡ mejorando o empeorando

---

### ğŸ¯ Sprint 3 (Acciones - Semana 5-6): Quick Actions
**Goal**: Hacer dashboard accionable

âœ… **Implementar**:
- Download Consolidated Report
- Compare Projects (modal)
- AI Bulk Generation (modal)

âŒ **Excluir**:
- Schedule Execution (requiere queue system)

**Valor**: Manager puede actuar sobre la informaciÃ³n

---

## ğŸ’° IMPACTO COMERCIAL

### ROI para el Cliente:

**Antes** (sin mÃ©tricas):
- Manager hace 2h/dÃ­a de reuniones para entender estado de proyectos
- 2h Ã— 5 dÃ­as Ã— 4 semanas = **40h/mes**
- 40h Ã— $100/hora = **$4,000/mes** desperdiciados

**DespuÃ©s** (con dashboard):
- Manager ve dashboard en 5 minutos cada maÃ±ana
- 5min Ã— 20 dÃ­as = **1.67h/mes**
- Ahorro: 40 - 1.67 = **38.33h/mes**
- Ahorro: $3,833/mes

**ROI**:
- Costo SaaS: $799/mes
- Ahorro: $3,833/mes
- **ROI: 4.8x**

### Pitch de Ventas:

> "Nuestro Manager Dashboard predice quÃ© proyectos fallarÃ¡n **3 semanas antes** del deadline, te ahorra **40 horas al mes** en reuniones de status, y justifica su costo en la primera semana con AI test generation. Â¿CuÃ¡nto vale para ti dormir tranquilo sabiendo que ningÃºn proyecto explotarÃ¡ sin previo aviso?"

**Precio Target**: $799-$1,299/mes por organizaciÃ³n

---

**Autor**: Claude AI (Software Engineering + SaaS Strategy)
**RevisiÃ³n**: v2.0 Final
